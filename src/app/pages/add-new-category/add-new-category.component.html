<h1 class="text-4xl mb-5 font-semibold text-gray-900 text-center">Create New Category</h1>

<form class="space-y-3 max-w-xs mx-auto" [formGroup]="categoryForm" (ngSubmit)="handleSubmit()">


  <!-- name -->
  <div class="">
    <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
    <div class="relative ">
      <input formControlName="name" [ngClass]="{
          'input-invalid':categoryForm.controls['name'].errors && categoryForm.controls['name'].touched,
          'input':!categoryForm.controls['name'].touched,
          'input-valid':categoryForm.controls['name'].touched && !categoryForm.controls['name'].errors
        }" id="name" name="name" type="text" required>

      <!-- Error Icon -->
      <div *ngIf="categoryForm.controls['name'].errors && categoryForm.controls['name'].touched"
        class="pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3">
        <svg class="h-5 w-5 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
          aria-hidden="true">
          <path fill-rule="evenodd"
            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z"
            clip-rule="evenodd" />
        </svg>
      </div>


    </div>

    <p *ngIf="categoryForm.controls['name'].errors?.['required'] && categoryForm.controls['name'].touched"
      class="mt-1 ml-2 text-sm text-red-600">
      name is Required.
    </p>
    <p *ngIf="categoryForm.controls['name'].errors?.['minlength'] && categoryForm.controls['name'].touched"
      class="mt-1 ml-2 text-sm text-red-600">
      name length must be grater than 3 chars
    </p>


  </div>

  <!-- Image -->
  <div class="">
    <label for="image" class="block text-sm font-medium text-gray-700 mb-2">Image</label>

    <label for="file"
      class=" rounded-md bg-white px-3 py-2 text-md font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 inline">Choose
      Image</label>

    <input (change)="getSelectedImage($event)" class="hidden" id="file" type="file">

    <img *ngIf="!!imageSrc" [src]="imageSrc" alt="new category"
      class="w-20 h-20 object-cover inline ml-16 rounded-full">

  </div>




  <div>
    <button type="submit" [disabled]="categoryForm.status=='INVALID' || loading"
      class=" w-full mt-3 rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 inline-flex items-center justify-center gap-3 disabled:bg-indigo-300 disabled:cursor-not-allowed">

      Create

      <svg *ngIf="loading" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
        class="-ml-1 mr-2 h-5 w-5 animate-spin" width="24" height="24" viewBox="0 0 24 24">
        <path
          d="M8.175 7.377l-3.042-5.27 1.732-1 3.045 5.273c-.635.238-1.222.573-1.735.997zm-.799.8l-5.27-3.042-1 1.732 5.274 3.045c.237-.635.572-1.223.996-1.735zm-1.376 3.823c0-.341.035-.673.09-.999h-6.09v1.999h6.09c-.055-.326-.09-.659-.09-1zm11.351-2.705l5.208-3.007-.333-.577-5.206 3.007c.121.185.23.379.331.577zm-5.351-3.295c.341 0 .673.035.999.09v-6.09h-1.999v6.09c.326-.055.659-.09 1-.09zm3.14.894l3.004-5.204-.288-.166-3 5.197.284.173zm1.685 8.662l5.234 3.022.666-1.154-5.229-3.019c-.181.41-.408.794-.671 1.151zm-10.444-1.467l-5.274 3.046 1 1.732 5.27-3.042c-.424-.513-.759-1.1-.996-1.736zm11.594-2.589l.025.5-.025.5h6.025v-1h-6.025zm-3.727 6.061l3.03 5.249 1.442-.833-3.031-5.25c-.437.34-.92.623-1.441.834zm-2.248.439c-.341 0-.674-.035-1-.09v6.09h1.999v-6.09c-.326.055-.658.09-.999.09zm-3.824-1.376l-3.042 5.27 1.732 1 3.045-5.274c-.635-.237-1.222-.572-1.735-.996z" />
      </svg>

    </button>
  </div>


</form>